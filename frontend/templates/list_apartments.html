{% extends 'base.html' %}

{% block title %}Apartments{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-md-10">
            <h2 class="pb-2">List of Apartments</h2>
            <div class="list-group">
                {% for apartment in apartments %}
                    <div class="list-group-item mt-4">
                        <div class="row">
                            <div class="col-md-8">
                                <h3>{{ apartment.name }}</h3>
                                <p><strong>Location:</strong> {{ apartment.location }}</p>
                                <p><strong>Description:</strong> {{ apartment.description }}</p>
                                <p><strong>Price:</strong> ${{ apartment.price }}</p>
                            </div>
                            <div class="col-md-4 text-right">
                                {% if apartment.photo %}
                                    <img width=70% height=70% src="{{ url_for('static', filename='uploads/' ~ apartment.photo) }}" alt="{{ apartment.name }}" class="img-fluid">
                                {% endif %}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-1">
                                {% if current_user.is_admin %}
                                    <form method="POST" action="{{ url_for('delete_apartment', apartment_id=apartment.id) }}" class="mt-3">
                                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                        <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                                    </form>
                                {% endif %}
                            </div>
                            <div class="col-1 mt-3">
                                <a href="{{ url_for('apartment_detail', apartment_id=apartment.id) }}" class="btn btn-info btn-sm">Details</a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}
