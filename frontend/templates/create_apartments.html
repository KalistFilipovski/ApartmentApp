{% extends 'base.html' %}

{% block title %}Create Apartment{% endblock %}

{% block content %}
    <div class="row justify-content-center">
        <div class="col-md-6">
            <h1>Create Apartment</h1>
            <form method="POST" action="{{ url_for('create_apartments') }}" enctype="multipart/form-data">
                {{ form.hidden_tag() }}
                <div class="form-group">
                    {{ form.name.label(class="form-label") }}
                    {{ form.name(class="form-control") }}
                </div>
                <div class="form-group">
                    {{ form.location.label(class="form-label") }}
                    {{ form.location(class="form-control", id="location-input") }}
                </div>
                <div class="form-group">
                    {{ form.description.label(class="form-label") }}
                    {{ form.description(class="form-control") }}
                </div>
                <div class="form-group">
                    {{ form.price.label(class="form-label") }}
                    {{ form.price(class="form-control") }}
                </div>
                <div class="form-group">
                    {{ form.photo.label(class="form-label") }}
                    {{ form.photo(class="form-control") }}
                </div>
                <div class="form-group">
                    {{ form.submit(class="btn btn-primary") }}
                </div>
            </form>
        </div>
    </div>

    <!-- Google Places Autocomplete -->
    <script>
        function initAutocomplete() {
            var input = document.getElementById('location-input');
            var autocomplete = new google.maps.places.Autocomplete(input);
            autocomplete.setFields(['address_components', 'geometry', 'icon', 'name']);
            autocomplete.addListener('place_changed', function() {
                var place = autocomplete.getPlace();
                if (!place.geometry) {
                    window.alert("No details available for input: '" + place.name + "'");
                    return;
                }
            });
        }

        google.maps.event.addDomListener(window, 'load', initAutocomplete);
    </script>
{% endblock %}
